<!DOCTYPE html>
<html xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:ui="http://primefaces.org/ui">
	<h:head>
		<title>Rubrica telefonica</title>
	</h:head>
	<h:body>
		<h1>Benvenuto nella tua rubrica</h1>
		
		<h:form>
			<ui:dataTable
				value="#{rubrica.elencoContatti}" var="elemento" id="tabella">
				<ui:column>
					<f:facet name="header">
						<h:outputText value="Nome"></h:outputText>
					</f:facet>
					<h:inputHidden value="#{elemento.id}"></h:inputHidden>
					<h:outputText value="#{elemento.nome}"></h:outputText>
				</ui:column>
				<ui:column>
					<f:facet name="header">
						<h:outputText value="Cognome"></h:outputText>
					</f:facet>
					<h:outputText value="#{elemento.cognome}"></h:outputText>
				</ui:column>
				<ui:column>
					<f:facet name="header">
						<h:outputText value="Telefono"></h:outputText>
					</f:facet>		
					<h:outputText value="#{elemento.telefono}"></h:outputText>
				</ui:column>
				<ui:column>
					<f:facet name="header">
						<h:outputText value="Email"></h:outputText>
					</f:facet>
					<h:outputText value="#{elemento.email}"></h:outputText>
				</ui:column>
				<ui:column>
					<f:facet name="header">Azioni</f:facet>
					<ui:commandButton value="Cancella" actionListener="#{rubrica.cancella(elemento.id)}" update="tabella" />
				</ui:column>
			</ui:dataTable>
		</h:form>
		
		<h:form>
			<ui:dialog widgetVar="inserimento" width="400" height="500" modal="true">
				<ui:panel>
					<ui:panelGrid columns="3">
						<h:outputLabel value="Nome" />
						<ui:inputText id="nome" value="#{rubrica.contatto.nome}" required="true" requiredMessage="Nome obbligatorio" />
						<ui:message for="nome"></ui:message>
						<h:outputLabel value="Cognome" />
						<ui:inputText id="cognome" value="#{rubrica.contatto.cognome}" required="true" requiredMessage="Cognome obbligatorio" />
						<ui:message for="cognome"></ui:message>
						<h:outputLabel value="Telefono" />
						<ui:inputText id="telefono" value="#{rubrica.contatto.telefono}" required="true" requiredMessage="Telefono obbligatorio" />
						<ui:message for="telefono"></ui:message>
						<h:outputLabel value="Email" />
						<ui:inputText value="#{rubrica.contatto.email}" />
					</ui:panelGrid>
					<ui:commandButton actionListener="#{rubrica.salva}" onclick="inserimento.close();" value="Salva"></ui:commandButton>
				</ui:panel>
			</ui:dialog>
			<ui:commandButton type="button" onclick="PF('inserimento').show();" value="Aggiungi contatto"></ui:commandButton>
		</h:form>
</h:body>
</html>